---
title: "Demo Correlation"
author: "Dr K"
date: "November 1, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("vec_cos.R")
```

## Create a 2 col array balanced at zero

```{r}
x=seq(from=-10,to=10,by=2)
y=x
tot=sum(x*y)
tot
```
benchmark

now got thru a loop of permuting y and capturing the product into a bucket.

```{r}
bucket=numeric()
for (i in 1:1000){
  z=sample(y,size = length(x))
  bucket[i]=sum(x*z)
}
```
```{r}
summary(bucket)
plot(density(bucket))
```
  
#Conclusion - The largest sum of products occurs when the numbers are paired with each other. Any other permutation of the y's with the x's yields a smaller number (in absolute value). The sum product is basically the correlation. (un-normalized)

```{r}
 z=sample(y,size = length(x))
  aaa=sum(x*z)
  plot(x,z)
  aaa/tot
  #now use correlation function
  cor(x,z)
```

##Geometric interpretation  

### x and y are vectors and their sumproduct is a dot-product. They both have the same length. The original dot product is their length squared, any permutation of y produces a vector of the same length but their dot product is then reduced by the cosine of the angle between them, so basically the correlation between x and z is the cosine of the angle between x and z as vectors.

```{r}
if(!require("pracma")) {install.packages("pracma");require("pracma")}

dot(x,z)
print(vec_cos(x,z))

```

